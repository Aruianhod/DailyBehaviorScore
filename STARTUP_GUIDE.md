# 日常行为分管理系统 - 启动指南

## 🚀 快速启动步骤

### 1. 数据库初始化
```bash
# 启动MySQL服务
# 导入数据库结构和初始数据
mysql -u root -p < db_init.sql
```

### 2. 安装依赖
```bash
# 安装前端依赖
npm install

# 后端依赖已在server.cjs中引用
```

### 3. 启动Paxos分布式服务（可选）
```bash
# Windows
cd src/paxos
start_paxos_enhanced.bat

# Linux/macOS  
cd src/paxos
chmod +x start_paxos_enhanced.sh
./start_paxos_enhanced.sh
```

### 4. 启动后端服务
```bash
# 后端服务运行在 http://localhost:3000
node server.cjs
```

### 5. 启动前端开发服务器
```bash
# 前端开发服务器运行在 http://localhost:5173
npm run dev
```

### 6. 访问系统
在浏览器中打开 `http://localhost:5173`

## 🔑 默认账号

### 管理员
- 用户名: `admin`
- 密码: `admin123`

### 老师
- 用户名: `teacher1`  
- 密码: `teacher123`

### 学生
- 用户名: `2025000001`
- 密码: `2025000001`

## 🧪 功能测试

### 测试Paxos一致性功能
```bash
cd src/paxos
node testFinalValidation.cjs
```

### 运行系统完整测试
```bash
cd test  
node comprehensive_system_test.cjs
```

## 📊 系统功能概览

### 管理员功能
- ✅ 学生信息管理（导入/导出/修改）
- ✅ 分值批量修改
- ✅ 审核老师申请
- ✅ 老师账号管理
- ✅ 数据归档功能

### 老师功能  
- ✅ 提交分值修改申请
- ✅ 查看申请历史记录
- ✅ 浏览学生信息
- ✅ 修改登录密码

### 学生功能
- ✅ 查看当前分值
- ✅ 查看分值变更记录
- ✅ 移动端优化界面

## 🔧 高级功能

### Paxos分布式一致性
- 自动端口切换（3002→3003→3004...）
- 服务自动发现
- 一致性检查集成
- 降级模式处理

### 数据归档
- 按年级批量归档
- ZIP压缩导出
- 归档历史记录
- 数据完整性保证

### 性能优化
- 按需加载数据
- 分页查询
- 年级班级联动筛选
- 移动端适配

## ⚠️ 注意事项

1. **数据库配置**: 请根据实际情况修改 `server.cjs` 中的数据库连接参数
2. **端口配置**: 确保端口3000（后端）和5173（前端）未被占用
3. **Paxos服务**: 可选功能，系统在Paxos服务不可用时会自动使用降级模式
4. **数据备份**: 在进行归档操作前建议备份数据库

## 🐛 故障排除

### 常见问题
1. **数据库连接失败**: 检查MySQL服务是否启动，用户名密码是否正确
2. **端口被占用**: 可使用其他端口或关闭占用进程
3. **导入数据失败**: 检查Excel文件格式是否正确
4. **Paxos服务启动失败**: 检查端口是否被占用，可尝试其他端口

### 日志查看
- 后端日志: 控制台输出
- 前端日志: 浏览器开发者工具
- Paxos日志: src/paxos目录下的控制台输出

## 📞 技术支持

如有问题，请检查：
1. 所有服务是否正常启动
2. 数据库连接是否正常
3. 端口是否可用
4. 日志错误信息

系统已经过全面测试，具备生产环境部署条件。
